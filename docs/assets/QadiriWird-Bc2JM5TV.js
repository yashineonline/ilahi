import{d as ve,r as s,c as v,w as G,a as ge,o as me,b as fe,u as pe,e as i,f as r,g as t,h as T,i as g,j as h,F as x,k as m,v as W,t as f,l as be,m as K,n as R,p as C,q as he,s as xe,T as we,x as O,_ as ye}from"./main-Hn_asDUu.js";const Se={class:"flex justify-between items-center mb-4"},ke={key:0,class:"text-3xl font-bold"},_e={class:"flex gap-2"},Te={key:0,class:"controls mb-4 p-4 bg-gray-100 rounded-lg"},We={class:"collapse collapse-arrow"},Ce={class:"collapse-content"},Fe={class:"flex flex-wrap items-center gap-4 mb-2"},Ie={class:"flex items-center"},qe={class:"ml-2"},ze={class:"flex items-center"},Me={class:"flex items-center"},Ee={class:"flex flex-wrap items-center gap-2"},Le=["value"],Ne={class:"flex flex-wrap items-center gap-2 mt-2"},Pe={key:0,class:"loading loading-spinner loading-lg"},He={key:1},Be=["innerHTML"],De=["innerHTML"],Qe=["innerHTML"],Ve=["disabled"],$e={class:"flex items-center"},je=["max"],Ue=["disabled"],Ae=300,Xe=ve({__name:"QadiriWird",emits:["go-back"],setup(Ge,{emit:Z}){const B=s("left"),a=s([]),n=s(0),w=s(!0),y=s(!0),F=s(!1),S=s(""),c=s(parseInt(localStorage.getItem("qadiriWirdFontSize")||"24")),p=s(localStorage.getItem("qadiriWirdTextColor")||"#229B36"),d=s(localStorage.getItem("qadiriWirdBackgroundColor")||"#E1D5D0"),J=s(null);let D=0,Q=0;const Y=[{value:"slide",label:"Slide"},{value:"fade",label:"Fade"},{value:"zoom",label:"Zoom"},{value:"flip",label:"Flip"},{value:"slideFade",label:"Slide and Fade"},{value:"bounce",label:"Bounce"},{value:"pageTurn",label:"Page Turn"}],k=s(localStorage.getItem("qadiriWirdTransition")||"slide"),ee=l=>{const e=l.target,o=parseInt(e.value,10);I.value=o},te=()=>{n.value=0},le=()=>{w.value=!w.value},oe=()=>{y.value=!y.value},V=l=>l?l.replace(/<br>/g," "):"",$=l=>l.split(/\n\s*\n/).map(e=>e.trim()).filter(e=>e.length>0&&e!=="Qadiri Wird").map(e=>e.replace(/\n/g,"<br>"));v(()=>a.value[n.value]||""),v(()=>a.value[n.value-1]||""),v(()=>a.value[n.value+1]||"");const I=v({get:()=>n.value+1,set:l=>{n.value=E(l-1)}}),j=v(()=>_.value?Math.min(P.value*.75,18):P.value*.75),ae=async()=>{F.value=!0,S.value="";try{const b="https://api.github.com/repos/yashineonline/ilahiRepository/contents/qadiriWird.txt";console.log("Fetching Qadiri Wird from GitHub:",b);const H=await fetch(b,{headers:{Accept:"application/vnd.github.v3.raw"}});if(!H.ok)throw new Error(`HTTP error! status: ${H.status}`);const X=await H.text();console.log("Fetched text:",X.substring(0,100)+"..."),a.value=$(X),console.log("Split wird:",a.value)}catch(l){console.error("Error fetching Qadiri Wird from GitHub:",l);try{console.log("Fetching Qadiri Wird from local file");const e=await fetch("/qadiriWird.txt");if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const o=await e.text();console.log("Fetched text from local file:",o.substring(0,100)+"..."),a.value=$(o),console.log("Split wird from local file:",a.value)}catch(e){console.error("Error fetching local Qadiri Wird:",e),S.value="Failed to load Qadiri Wird. Please try again later."}}finally{F.value=!1,n.value=0}},q=()=>{n.value<a.value.length-1&&(n.value=E(n.value+1),B.value="left")},z=()=>{n.value>0&&(n.value=E(n.value-1),B.value="right")};let U=0;const M=l=>{const e=new Date().getTime();e-U>Ae&&(l.key==="ArrowLeft"?z():l.key==="ArrowRight"&&q(),U=e)},ne=l=>{D=l.touches[0].clientX},se=l=>{Q=l.touches[0].clientX},ie=()=>{const l=D-Q;Math.abs(l)>50&&(l>0?q():z())},E=l=>Math.max(0,Math.min(l,a.value.length-1));G([c,p,d],([l,e,o])=>{localStorage.setItem("qadiriWirdFontSize",l.toString()),localStorage.setItem("qadiriWirdTextColor",e),localStorage.setItem("qadiriWirdBackgroundColor",o)}),G(k,l=>{localStorage.setItem("qadiriWirdTransition",l)}),ge(()=>{localStorage.getItem("qadiriWirdFontSize")||localStorage.setItem("qadiriWirdFontSize",c.value.toString()),localStorage.getItem("qadiriWirdTextColor")||localStorage.setItem("qadiriWirdTextColor",p.value),localStorage.getItem("qadiriWirdBackgroundColor")||localStorage.setItem("qadiriWirdBackgroundColor",d.value)});const _=s(!1),L=()=>{_.value=window.innerWidth<768};me(async()=>{console.log("QadiriWird component mounted");try{await ae(),console.log("Fetched Wird:",a.value),console.log("Number of parts:",a.value.length),console.log("First part:",a.value[0]),console.log("Last part:",a.value[a.value.length-1])}catch(l){console.error("Error fetching Wird:",l)}document.addEventListener("keydown",M),L(),window.addEventListener("resize",L)}),fe(()=>{document.removeEventListener("keydown",M),window.removeEventListener("resize",L)});const u=s(!1),N=s(!1),A=pe(),re=()=>{u.value=!u.value,A.setNavigationVisibility(!u.value)},ce=()=>{N.value=!N.value},ue=Z,de=()=>{u.value=!1,A.setNavigationVisibility(!0),ue("go-back")},P=v(()=>_.value?Math.min(c.value,24):c.value);return(l,e)=>(r(),i("div",{class:O(["qadiri-wird-container p-4",{fullscreen:u.value}])},[t("div",Se,[t("button",{onClick:de,class:"btn btn-circle btn-sm"},[g(h(x),{icon:["fas","arrow-left"]})]),u.value?T("",!0):(r(),i("h1",ke,"Qadiri Wird")),t("div",_e,[t("button",{onClick:re,class:"btn btn-circle btn-sm"},[g(h(x),{icon:["fas",u.value?"compress":"expand"]},null,8,["icon"])]),t("button",{onClick:ce,class:"btn btn-circle btn-sm"},[g(h(x),{icon:["fas","cog"]})])])]),N.value?(r(),i("div",Te,[t("div",We,[e[9]||(e[9]=t("input",{type:"checkbox"},null,-1)),e[10]||(e[10]=t("div",{class:"collapse-title text-xl font-medium"}," Settings ",-1)),t("div",Ce,[t("div",Fe,[t("div",Ie,[e[5]||(e[5]=t("label",{for:"fontSize",class:"mr-2"},"Font Size:",-1)),m(t("input",{type:"range",id:"fontSize",min:"16",max:"132","onUpdate:modelValue":e[0]||(e[0]=o=>c.value=o),class:"range range-primary w-32 custom-range"},null,512),[[W,c.value]]),t("span",qe,f(c.value)+"px",1)]),t("div",ze,[e[6]||(e[6]=t("label",{for:"textColor",class:"mr-2"},"Text:",-1)),m(t("input",{type:"color",id:"textColor","onUpdate:modelValue":e[1]||(e[1]=o=>p.value=o),class:"w-8 h-8"},null,512),[[W,p.value]])]),t("div",Me,[e[7]||(e[7]=t("label",{for:"backgroundColor",class:"mr-2"},"Background:",-1)),m(t("input",{type:"color",id:"backgroundColor","onUpdate:modelValue":e[2]||(e[2]=o=>d.value=o),class:"w-8 h-8"},null,512),[[W,d.value]])])]),t("div",Ee,[e[8]||(e[8]=t("label",{for:"transitionSelect",class:"mr-2"},"Transition:",-1)),m(t("select",{id:"transitionSelect","onUpdate:modelValue":e[3]||(e[3]=o=>k.value=o),class:"select select-primary select-sm bg-white"},[(r(),i(K,null,R(Y,o=>t("option",{key:o.value,value:o.value},f(o.label),9,Le)),64))],512),[[be,k.value]]),t("div",Ne,[t("button",{onClick:te,class:"btn btn-primary btn-sm"},"Restart"),t("button",{onClick:le,class:"btn btn-secondary btn-sm"},f(w.value?"Hide":"Show")+" Previous ",1),t("button",{onClick:oe,class:"btn btn-secondary btn-sm"},f(y.value?"Hide":"Show")+" Next ",1)])])])])])):T("",!0),t("div",{class:"wird-display p-4 rounded-lg shadow-lg flex flex-col items-center",style:C({fontSize:`${P.value}px`,color:p.value,backgroundColor:d.value}),ref_key:"wirdDisplay",ref:J,onTouchstart:ne,onTouchmove:se,onTouchend:ie,tabindex:"0",onKeydown:M},[F.value?(r(),i("div",Pe)):S.value?(r(),i("div",He,f(S.value),1)):(r(),i("div",{key:2,class:"relative flex flex-col h-[60vh] w-full mx-auto shadow-lg rounded-lg",style:C({backgroundColor:d.value})},[w.value?(r(),i("div",{key:0,class:"flex-shrink-0 w-full p-2 text-gray-400 text-center",style:C({fontSize:`${j.value}px`})},[t("div",{innerHTML:V(a.value[n.value-1])},null,8,Be)],4)):T("",!0),g(we,{name:k.value,tag:"div",mode:"out-in",class:"flex-grow flex items-center justify-center overflow-auto"},{default:he(()=>[(r(!0),i(K,null,R(a.value,(o,b)=>m((r(),i("div",{key:b,class:"w-full h-full flex items-center justify-center p-4 overflow-y-auto"},[t("div",{class:"wird-part-content",innerHTML:o},null,8,De)])),[[xe,n.value===b]])),128))]),_:1},8,["name"]),y.value?(r(),i("div",{key:1,class:"flex-shrink-0 w-full p-2 text-gray-400 text-center",style:C({fontSize:`${j.value}px`})},[t("div",{innerHTML:V(a.value[n.value+1])},null,8,Qe)],4)):T("",!0)],4)),t("div",{class:O(["navigation mt-4 flex justify-between items-center w-full",{mobile:_.value}])},[t("button",{onClick:z,class:"btn btn-circle",disabled:n.value===0},[g(h(x),{icon:["fas","chevron-left"]})],8,Ve),t("div",$e,[m(t("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>I.value=o),type:"number",min:"1",max:a.value.length,class:"w-16 text-center mr-2 bg-white",onChange:ee},null,40,je),[[W,I.value,void 0,{number:!0}]]),t("span",null,"/ "+f(a.value.length),1)]),t("button",{onClick:q,class:"btn btn-circle",disabled:n.value===a.value.length-1},[g(h(x),{icon:["fas","chevron-right"]})],8,Ue)],2)],36)],2))}}),Re=ye(Xe,[["__scopeId","data-v-388b9cba"]]);export{Re as default};
